<link rel="stylesheet" href="{{ request.url_for('static', path='css/lanes.css') }}">
{% if project %}
    <h2>專案名稱：{{ project.name }}</h2>
    {% if project.description %}
        <p>{{ project.description }}</p>
    {% endif %}
{% else %}
    <h2>所有泳道</h2>
{% endif %}

<div class="board">
    {% for lane in lanes %}
        <div class="lane">
            <span class="lane-title">{{ lane.name }}</span>
            <span><a href="">+</a></span>
            {% if not project %}
                <div>
                    <small>所屬專案：{{ lane.project.name or "無" }}</small>
                </div>
            {% endif %}
            <div class="lane-actions">
                <a href="/lanes/{{ lane.id }}/edit">編輯</a>
                <form action="/lanes/{{ lane.id }}/delete" method="POST">
                    <button type="submit" onclick="return confirm('確定要刪除嗎？')">刪除</button>
                </form>
            </div>
        </div>
    {% endfor %}
</div>

<div class="add-lane-form">
    <h3>新增泳道</h3>
    <form action="/lanes" method="POST">
        <div>
            <label>名稱</label>
            <input type="text" name="name" required>
            {% if project %}
            <input type="hidden" name="project_id" value="{{ project.id }}">
            {% endif %}
        </div>
        <button type="submit">新增</button>
    </form>
</div>

<a href="/projects">回首頁</a>
